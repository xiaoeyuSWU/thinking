<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MindLog | SambyLi</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#4A6FA5',
                        secondary: '#E07A5F',
                        neutral: '#F4F1DE',
                        dark: '#3D405B',
                        accent: '#81B29A',
                        reading: '#F59E0B', // è¯»ä¹¦ç¬”è®°åˆ†ç±»é¢œè‰²
                        gym: '#10B981' // æ–°å¢å¥èº«åˆ†ç±»é¢œè‰²
                    },
                    fontFamily: {
                        inter: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }

            .heart-animation {
                position: fixed;
                pointer-events: none;
                animation: float 4s ease-out forwards;
                font-size: 24px;
                z-index: 9999;
            }
            
            @keyframes float {
                0% { transform: translateY(0) scale(1); opacity: 1; }
                100% { transform: translateY(-100vh) scale(0); opacity: 0; }
            }

            .text-balance {
                text-wrap: balance;
            }
            .card-hover {
                transition: all 0.3s ease;
                box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            }
            .card-hover:hover {
                box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
                transform: translateY(-2px);
            }
            .nav-shadow {
                box-shadow: 0 4px 20px -2px rgba(0, 0, 0, 0.1);
            }
            .skeleton {
                background-color: #e2e8f0;
                animation: pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite;
                border-radius: 0.25rem;
            }
            @keyframes pulse {
                0%, 100% {
                    opacity: 1;
                }
                50% {
                    opacity: 0.5;
                }
            }
        }
    </style>
    <style>
        /* è‡ªå®šä¹‰æ ·å¼ */
        .transition-all {
            transition-property: all;
            transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
            transition-duration: 300ms;
        }
        .hover-shadow-lg:hover {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .hover-translate-y-1:hover {
            transform: translateY(-1px);
        }
        .focus-ring-2:focus {
            outline: 2px solid transparent;
            outline-offset: 2px;
        }
        .focus-ring-primary-300:focus {
            box-shadow: 0 0 0 3px rgba(74, 111, 165, 0.3);
        }
        .focus-border-primary:focus {
            border-color: #4A6FA5;
        }
        .text-gray-400 {
            color: #9CA3AF;
        }
        .text-primary {
            color: #4A6FA5;
        }
        .hover-text-primary:hover {
            color: #4A6FA5;
        }
        .bg-primary {
            background-color: #4A6FA5;
        }
        .text-white {
            color: white;
        }
        .bg-white {
            background-color: white;
        }
        .text-dark {
            color: #3D405B;
        }
        .rounded-full {
            border-radius: 9999px;
        }
        .border {
            border-width: 1px;
        }
        .border-gray-200 {
            border-color: #E5E7EB;
        }
        .py-2 {
            padding-top: 0.5rem;
            padding-bottom: 0.5rem;
        }
        .px-4 {
            padding-left: 1rem;
            padding-right: 1rem;
        }
        .pl-10 {
            padding-left: 2.5rem;
        }
        .pr-4 {
            padding-right: 1rem;
        }
        .w-full {
            width: 100%;
        }
        .absolute {
            position: absolute;
        }
        .right-3 {
            right: 0.75rem;
        }
        .left-3 {
            left: 0.75rem;
        }
        .top-1-2 {
            top: 50%;
        }
        .transform {
            transform: translateY(-50%);
        }
        .opacity-0 {
            opacity: 0;
        }
        .opacity-100 {
            opacity: 1;
        }
        .invisible {
            visibility: hidden;
        }
        .visible {
            visibility: visible;
        }
        .py-3 {
            padding-top: 0.75rem;
            padding-bottom: 0.75rem;
        }
        .py-2 {
            padding-top: 0.5rem;
            padding-bottom: 0.5rem;
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="font-inter bg-neutral/30 text-dark min-h-screen flex flex-col">
    <!-- å¯¼èˆªæ  -->
    <header id="navbar" class="fixed w-full bg-white/90 backdrop-blur-sm z-50 transition-all duration-300">
        <div class="container mx-auto px-4 py-3 flex items-center justify-between nav-shadow">
            <a href="#" class="flex items-center space-x-2">
                <span class="text-primary text-2xl"><i class="fa fa-lightbulb-o"></i></span>
                <span class="font-bold text-xl text-dark">MindLog</span>
            </a>
            
            <!-- æ¡Œé¢ç«¯å¯¼èˆª -->
            <nav class="hidden md:flex items-center space-x-8">
                <a href="#" class="font-medium text-dark hover:text-primary transition-colors">é¦–é¡µ</a>
                <div class="relative group">
                    <button class="font-medium text-dark hover:text-primary transition-colors flex items-center">
                        åˆ†ç±»
                        <i class="fa fa-chevron-down ml-1 text-xs"></i>
                    </button>
                    <div class="absolute left-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 z-50">
                        <a href="#" data-category="all" class="block px-4 py-2 text-sm hover:bg-primary/10 hover:text-primary">å…¨éƒ¨</a>
                        <a href="#" data-category="ai" class="block px-4 py-2 text-sm hover:bg-primary/10 hover:text-primary">AI</a>
                        <a href="#" data-category="hobby" class="block px-4 py-2 text-sm hover:bg-primary/10 hover:text-primary">çˆ±å¥½</a>
                        <a href="#" data-category="milestone" class="block px-4 py-2 text-sm hover:bg-primary/10 hover:text-primary">å¤§äº‹è®°</a>
                        <a href="#" data-category="study" class="block px-4 py-2 text-sm hover:bg-primary/10 hover:text-primary">å­¦ä¸š</a>
                        <a href="#" data-category="life" class="block px-4 py-2 text-sm hover:bg-primary/10 hover:text-primary">ç”Ÿæ´»</a>
                        <a href="#" data-category="reading" class="block px-4 py-2 text-sm hover:bg-primary/10 hover:text-primary">è¯»ä¹¦ç¬”è®°</a>
                        <a href="#" data-category="gym" class="block px-4 py-2 text-sm hover:bg-primary/10 hover:text-primary">å¥èº«</a>
                    </div>
                </div>
                <a href="#about" class="font-medium text-dark hover:text-primary transition-colors">å…³äº</a>
            </nav>
            
            <!-- æœç´¢æ¡† -->
            <div class="relative hidden md:block w-64">
                <div class="relative">
                    <input id="search-input" type="text" placeholder="æœç´¢å†…å®¹..." class="w-full pl-10 pr-10 py-2 rounded-full border border-gray-200 focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary transition-all">
                    <button id="search-button" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-primary transition-colors">
                        <i class="fa fa-long-arrow-right"></i>
                    </button>
                    <i class="fa fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                </div>
            </div>
            
            <!-- ç§»åŠ¨ç«¯èœå•æŒ‰é’® -->
            <button id="mobile-menu-button" class="md:hidden text-dark focus:outline-none">
                <i class="fa fa-bars text-xl"></i>
            </button>
        </div>
        
        <!-- ç§»åŠ¨ç«¯å¯¼èˆªèœå• -->
        <div id="mobile-menu" class="md:hidden bg-white shadow-lg absolute w-full left-0 top-full opacity-0 transition-all duration-300 transform -translate-y-4 pointer-events-none">
            <div class="container mx-auto px-4 py-3">
                <div class="relative mb-4">
                    <div class="relative">
                        <input id="mobile-search-input" type="text" placeholder="æœç´¢å†…å®¹..." class="w-full pl-10 pr-10 py-2 rounded-full border border-gray-200 focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary transition-all">
                        <button id="mobile-search-button" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-primary transition-colors">
                            <i class="fa fa-long-arrow-right"></i>
                        </button>
                        <i class="fa fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                    </div>
                </div>
                <nav class="flex flex-col space-y-3">
                    <a href="#" class="font-medium text-dark hover:text-primary transition-colors py-2">é¦–é¡µ</a>
                    <div class="relative">
                        <button id="mobile-category-button" class="font-medium text-dark hover:text-primary transition-colors flex items-center justify-between py-2">
                            åˆ†ç±»
                            <i class="fa fa-chevron-down text-xs"></i>
                        </button>
                        <div id="mobile-category-menu" class="mt-1 ml-4 hidden">
                            <a href="#" data-category="all" class="block py-2 text-sm">å…¨éƒ¨</a>
                            <a href="#" data-category="ai" class="block py-2 text-sm">AI</a>
                            <a href="#" data-category="hobby" class="block py-2 text-sm">çˆ±å¥½</a>
                            <a href="#" data-category="milestone" class="block py-2 text-sm">å¤§äº‹è®°</a>
                            <a href="#" data-category="study" class="block py-2 text-sm">å­¦ä¸š</a>
                            <a href="#" data-category="life" class="block py-2 text-sm">ç”Ÿæ´»</a>
                            <a href="#" data-category="reading" class="block py-2 text-sm">è¯»ä¹¦ç¬”è®°</a>
                            <a href="#" data-category="gym" class="block py-2 text-sm">å¥èº«</a>
                        </div>
                    </div>
                    <a href="#about" class="font-medium text-dark hover:text-primary transition-colors py-2">å…³äº</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- ä¸»å†…å®¹åŒº -->
    <main class="flex-grow pt-20 pb-10">
        <div class="container mx-auto px-4">
            <!-- é¡µé¢æ ‡é¢˜ -->
            <div class="text-center mb-12 mt-6">
                <h1 class="text-[clamp(2rem,5vw,3rem)] font-bold text-dark mb-3">MindLog</h1>
                <div class="flex justify-center space-x-6 mb-6">
                    <a href="https://liboyuan.site/" target="_blank" class="text-primary hover:text-primary/80 transition-colors">
                        <i class="fa fa-globe text-2xl"></i>
                    </a>
                    <a href="mailto:1920295921@qq.com" target="_blank" class="text-primary hover:text-primary/80 transition-colors">
                        <i class="fa fa-envelope text-2xl"></i>
                    </a>
                    <a href="https://github.com/xiaoeyuSWU" target="_blank" class="text-primary hover:text-primary/80 transition-colors">
                        <i class="fa fa-github text-2xl"></i>
                    </a>
                </div>
                <p class="text-gray-600 max-w-2xl mx-auto text-balance">å–œæ¬¢æ‚¨æ¥ è¿™æ˜¯æˆ‘è®°å½•è‡ªå·±å¤§å­¦æ—¶å…‰çš„åœ°æ–¹<br>æ¯•ç«Ÿ å¹²å˜›ä¸è®°å½• åˆä¸æ˜¯å¹´å¹´20å²</p>
            </div>
            
            <!-- åˆ†ç±»æ ‡ç­¾ -->
            <div class="flex flex-wrap justify-center gap-2 mb-10">
                <button data-category="all" class="category-btn bg-primary text-white px-4 py-2 rounded-full text-sm font-medium transition-all">å…¨éƒ¨</button>
                <button data-category="ai" class="category-btn bg-white text-dark px-4 py-2 rounded-full text-sm font-medium transition-all">AI</button>
                <button data-category="hobby" class="category-btn bg-white text-dark px-4 py-2 rounded-full text-sm font-medium transition-all">çˆ±å¥½</button>
                <button data-category="milestone" class="category-btn bg-white text-dark px-4 py-2 rounded-full text-sm font-medium transition-all">å¤§äº‹è®°</button>
                <button data-category="study" class="category-btn bg-white text-dark px-4 py-2 rounded-full text-sm font-medium transition-all">å­¦ä¸š</button>
                <button data-category="life" class="category-btn bg-white text-dark px-4 py-2 rounded-full text-sm font-medium transition-all">ç”Ÿæ´»</button>
                <button data-category="reading" class="category-btn bg-white text-dark px-4 py-2 rounded-full text-sm font-medium transition-all">è¯»ä¹¦ç¬”è®°</button>
                <button data-category="gym" class="category-btn bg-white text-dark px-4 py-2 rounded-full text-sm font-medium transition-all">å¥èº«</button>
            </div>
            
            <!-- æ€è€ƒå†…å®¹æµ -->
            <div id="thoughts-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- éª¨æ¶å±åŠ è½½æ•ˆæœ -->
                <div class="skeleton-card col-span-full md:col-span-1 lg:col-span-1 bg-white rounded-lg overflow-hidden shadow-md animate-pulse">
                    <div class="p-6">
                        <div class="flex items-center mb-3">
                            <div class="skeleton w-20 h-5 rounded-full"></div>
                            <div class="skeleton ml-2 w-24 h-4 rounded"></div>
                        </div>
                        <div class="skeleton h-8 w-3/4 rounded mb-4"></div>
                        <div class="skeleton h-4 w-full rounded mb-2"></div>
                        <div class="skeleton h-4 w-5/6 rounded mb-2"></div>
                        <div class="skeleton h-4 w-2/3 rounded mb-6"></div>
                        <div class="skeleton h-5 w-24 rounded"></div>
                    </div>
                </div>
                <div class="skeleton-card col-span-full md:col-span-1 lg:col-span-1 bg-white rounded-lg overflow-hidden shadow-md animate-pulse">
                    <div class="p-6">
                        <div class="flex items-center mb-3">
                            <div class="skeleton w-20 h-5 rounded-full"></div>
                            <div class="skeleton ml-2 w-24 h-4 rounded"></div>
                        </div>
                        <div class="skeleton h-8 w-2/3 rounded mb-4"></div>
                        <div class="skeleton h-4 w-full rounded mb-2"></div>
                        <div class="skeleton h-4 w-5/6 rounded mb-2"></div>
                        <div class="skeleton h-4 w-3/4 rounded mb-6"></div>
                        <div class="skeleton h-5 w-24 rounded"></div>
                    </div>
                </div>
                <div class="skeleton-card col-span-full md:col-span-1 lg:col-span-1 bg-white rounded-lg overflow-hidden shadow-md animate-pulse">
                    <div class="p-6">
                        <div class="flex items-center mb-3">
                            <div class="skeleton w-20 h-5 rounded-full"></div>
                            <div class="skeleton ml-2 w-24 h-4 rounded"></div>
                        </div>
                        <div class="skeleton h-8 w-4/5 rounded mb-4"></div>
                        <div class="skeleton h-4 w-full rounded mb-2"></div>
                        <div class="skeleton h-4 w-5/6 rounded mb-2"></div>
                        <div class="skeleton h-4 w-3/4 rounded mb-6"></div>
                        <div class="skeleton h-5 w-24 rounded"></div>
                    </div>
                </div>
            </div>
            
            <!-- æ²¡æœ‰æ›´å¤šå†…å®¹ -->
            <div id="no-more-content" class="text-center py-10 hidden">
                <p class="text-gray-500">æˆ‘ä¹Ÿæ˜¯æœ‰åº•çº¿æ»´~</p>
            </div>
        </div>
    </main>

    <!-- å…³äºéƒ¨åˆ† -->
    <section id="about" class="bg-white py-16">
        <div class="container mx-auto px-4">
            <div class="max-w-3xl mx-auto text-center">
                <h2 class="text-[clamp(1.5rem,3vw,2rem)] font-bold text-dark mb-6">å…³äºMindLog</h2>
                <p class="text-gray-600 mb-8 leading-relaxed">
                    è¿™é‡Œæ˜¯æˆ‘é€šè¿‡æ–‡å­—è®°å½•è‡ªå·±çš„åœ°æ–¹<br>
                    å±•ç¤ºäº†ä¸€ä¸ªæ›´åŠ ç”ŸåŠ¨å’Œç«‹ä½“çš„æˆ‘<br>
                    åŒ…æ‹¬æˆ‘çš„æ—¥å¸¸ç”Ÿæ´»ã€å…´è¶£çˆ±å¥½ã€æ€è€ƒæ–¹å¼å’Œæˆ‘æ‰€å…³æ³¨çš„é¢†åŸŸç­‰<br>
                    æ¯•ç«Ÿï¼Œå¹²å˜›ä¸è®°å½•ï¼Œåˆä¸æ˜¯å¹´å¹´20å²
                </p>
            </div>
        </div>
    </section>

    <!-- é¡µè„š -->
    <footer class="bg-dark text-white py-8">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-4 md:mb-0 text-center md:text-left">
                    <a href="#" class="flex items-center justify-center md:justify-start space-x-2">
                        <span class="text-white text-xl"><i class="fa fa-lightbulb-o"></i></span>
                        <span class="font-bold text-lg">MindLog</span>
                    </a>
                    <p class="text-gray-400 text-sm mt-1">è®°å½•æ€è€ƒï¼Œè§è¯æˆé•¿</p>
                </div>
                <div style="display: flex; justify-content: center; align-items: center; gap: 8px;">
                    <div class="text-gray-400 text-sm">
                        &copy; 2024 MindLog
                    </div>
                    <div class="text-gray-400 text-sm">|</div>
                    <a href="https://liboyuan.com.cn/private/" class="text-sm" style="color: #4A6FA5; text-decoration: none;">
                        éšç§æ”¿ç­–
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <!-- è¿”å›é¡¶éƒ¨æŒ‰é’® -->
    <button id="back-to-top" class="fixed bottom-6 right-6 bg-primary text-white w-10 h-10 rounded-full flex items-center justify-center shadow-lg opacity-0 invisible transition-all duration-300 hover:bg-primary/90 focus:outline-none">
        <i class="fa fa-chevron-up"></i>
    </button>

    <script>
        // æ€è€ƒå†…å®¹æ•°æ®ï¼ˆå°†ä»JSONæ–‡ä»¶åŠ è½½ï¼‰
        let thoughts = [];
        
        // å½“å‰æ˜¾ç¤ºçš„æ€è€ƒæ•°é‡
        let currentCount = 0;
        // æ¯æ¬¡åŠ è½½çš„æ•°é‡
        const loadCount = 500;
        // å½“å‰ç­›é€‰çš„åˆ†ç±»
        let currentCategory = 'all';
        // å½“å‰æœç´¢å…³é”®è¯
        let currentSearchTerm = '';
        // æ˜¯å¦æ­£åœ¨åŠ è½½
        let isLoading = false;
        // æ˜¯å¦æ•°æ®åŠ è½½å¤±è´¥
        let dataLoadFailed = false;

        // DOM å…ƒç´ 
        const thoughtsContainer = document.getElementById('thoughts-container');
        const noMoreContentIndicator = document.getElementById('no-more-content');
        const backToTopButton = document.getElementById('back-to-top');
        const navbar = document.getElementById('navbar');
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        const mobileCategoryButton = document.getElementById('mobile-category-button');
        const mobileCategoryMenu = document.getElementById('mobile-category-menu');
        const searchInput = document.getElementById('search-input');
        const mobileSearchInput = document.getElementById('mobile-search-input');
        const searchButton = document.getElementById('search-button');
        const mobileSearchButton = document.getElementById('mobile-search-button');
        const categoryButtons = document.querySelectorAll('.category-btn');

        // åˆ†ç±»åç§°æ˜ å°„
        const categoryNames = {
            'ai': 'AI',
            'hobby': 'çˆ±å¥½',
            'milestone': 'å¤§äº‹è®°',
            'study': 'å­¦ä¸š',
            'life': 'ç”Ÿæ´»',
            'reading': 'è¯»ä¹¦ç¬”è®°', // æ–°å¢åˆ†ç±»
            'gym': 'å¥èº«' // æ–°å¢å¥èº«åˆ†ç±»
        };

        // åˆ†ç±»é¢œè‰²æ˜ å°„
        const categoryColors = {
            'ai': 'bg-blue-500',
            'hobby': 'bg-purple-500',
            'milestone': 'bg-orange-500',
            'study': 'bg-green-500',
            'life': 'bg-pink-500',
            'reading': 'bg-reading', // æ–°å¢åˆ†ç±»é¢œè‰²
            'gym': 'bg-gym' // æ–°å¢å¥èº«åˆ†ç±»é¢œè‰²
        };

        // ä»JSONæ–‡ä»¶åŠ è½½æ€è€ƒå†…å®¹
        async function loadThoughtsFromJSON() {
            try {
                const response = await fetch('thoughts.json');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                thoughts = await response.json();
                dataLoadFailed = false;
            } catch (error) {
                console.error('Failed to load thoughts data:', error);
                dataLoadFailed = true;
                
                // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
                thoughtsContainer.innerHTML = `
                    <div class="col-span-full text-center py-12">
                        <i class="fa fa-exclamation-triangle text-4xl text-red-400 mb-4"></i>
                        <p class="text-gray-500">åŠ è½½æ€è€ƒå†…å®¹å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–æ•°æ®æ–‡ä»¶ã€‚</p>
                    </div>
                `;
            }
        }

        // è®¡ç®—æ¯ä¸ªç±»åˆ«çš„å†…å®¹æ•°é‡
        function calculateCategoryCounts() {
            const counts = {
                all: thoughts.length,
                ai: 0,
                hobby: 0,
                milestone: 0,
                study: 0,
                life: 0,
                reading: 0, // æ–°å¢åˆ†ç±»è®¡æ•°
                gym: 0 // æ–°å¢å¥èº«åˆ†ç±»è®¡æ•°
            };
            
            thoughts.forEach(thought => {
                if (counts[thought.category]) {
                    counts[thought.category]++;
                }
            });
            
            return counts;
        }

        // æ›´æ–°ç±»åˆ«æŒ‰é’®çš„è®¡æ•°æ˜¾ç¤º
        function updateCategoryCounts() {
            const counts = calculateCategoryCounts();
            const categoryButtons = document.querySelectorAll('.category-btn');
            
            categoryButtons.forEach(button => {
                const category = button.getAttribute('data-category');
                let buttonText = '';
                
                switch(category) {
                    case 'all':
                        buttonText = 'å…¨éƒ¨';
                        break;
                    case 'ai':
                        buttonText = 'AI';
                        break;
                    case 'hobby':
                        buttonText = 'çˆ±å¥½';
                        break;
                    case 'milestone':
                        buttonText = 'å¤§äº‹è®°';
                        break;
                    case 'study':
                        buttonText = 'å­¦ä¸š';
                        break;
                    case 'life':
                        buttonText = 'ç”Ÿæ´»';
                        break;
                    case 'reading':
                        buttonText = 'è¯»ä¹¦ç¬”è®°';
                        break;
                    case 'gym':
                        buttonText = 'å¥èº«';
                        break;
                }
                
                button.textContent = `${buttonText} (${counts[category]})`;
            });
        }

        // åˆ›å»ºæ€è€ƒå¡ç‰‡
        function createThoughtCard(thought) {
            const card = document.createElement('article');
            card.className = `bg-white rounded-lg overflow-hidden shadow-md card-hover transition-all duration-300`;
            card.setAttribute('data-category', thought.category);
            
            // å¤„ç†å†…å®¹ä¸­çš„æ¢è¡Œç¬¦
            const formattedContent = thought.content.replace(/\n/g, '<br>');
            
            // å¡ç‰‡å†…å®¹
            card.innerHTML = `
                <div class="p-6">
                    <div class="flex items-center mb-3">
                        <span class="inline-block px-2 py-1 rounded-full text-xs font-medium ${categoryColors[thought.category]} text-white">
                            ${categoryNames[thought.category]}
                        </span>
                        <span class="ml-2 text-sm text-gray-500">${formatDate(thought.date)}</span>
                    </div>
                    <h3 class="text-xl font-bold mt-4 mb-3 text-dark">${thought.title}</h3>
                    <p class="text-gray-600 mb-4 line-clamp-4">${formattedContent}</p>
                    <button class="read-more-btn text-primary font-medium hover:text-primary/80 transition-colors flex items-center">
                        é˜…è¯»æ›´å¤š
                        <i class="fa fa-long-arrow-right ml-1"></i>
                    </button>
                </div>
            `;
            
            // æ·»åŠ é˜…è¯»æ›´å¤šäº‹ä»¶
            const readMoreBtn = card.querySelector('.read-more-btn');
            readMoreBtn.addEventListener('click', () => {
                showThoughtDetail(thought);
            });
            
            return card;
        }

        // æ ¼å¼åŒ–æ—¥æœŸ
        function formatDate(dateString) {
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            return new Date(dateString).toLocaleDateString('zh-CN', options);
        }

        // æ˜¾ç¤ºæ€è€ƒè¯¦æƒ…
        function showThoughtDetail(thought) {
            // å¤„ç†å†…å®¹ä¸­çš„æ¢è¡Œç¬¦
            const formattedContent = thought.content.replace(/\n/g, '<br>');
            
            // åˆ›å»ºé®ç½©å±‚
            const overlay = document.createElement('div');
            overlay.className = 'fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4';
            
            // åˆ›å»ºæ¨¡æ€æ¡†
            const modal = document.createElement('div');
            modal.className = 'bg-white rounded-lg max-w-3xl w-full max-h-[90vh] overflow-auto';
            
            // æ¨¡æ€æ¡†å†…å®¹
            modal.innerHTML = `
                <div class="p-6">
                    <div class="flex justify-between items-center mb-4">
                        <div class="flex items-center">
                            <span class="inline-block px-2 py-1 rounded-full text-xs font-medium ${categoryColors[thought.category]} text-white">
                                ${categoryNames[thought.category]}
                            </span>
                            <span class="ml-2 text-sm text-gray-500">${formatDate(thought.date)}</span>
                        </div>
                        <button class="close-modal text-gray-400 hover:text-gray-600 transition-colors">
                            <i class="fa fa-times text-xl"></i>
                        </button>
                    </div>
                    <h2 class="text-2xl font-bold mt-6 mb-4 text-dark">${thought.title}</h2>
                    <p class="text-gray-700 leading-relaxed">${formattedContent}</p>
                </div>
            `;
            
            // æ·»åŠ åˆ°é¡µé¢
            overlay.appendChild(modal);
            document.body.appendChild(overlay);
            
            // å…³é—­æ¨¡æ€æ¡†
            const closeModalBtn = modal.querySelector('.close-modal');
            closeModalBtn.addEventListener('click', () => {
                document.body.removeChild(overlay);
            });
            
            // ç‚¹å‡»é®ç½©å±‚å…³é—­
            overlay.addEventListener('click', (e) => {
                if (e.target === overlay) {
                    document.body.removeChild(overlay);
                }
            });
            
            // é”®ç›˜ESCå…³é—­
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    document.body.removeChild(overlay);
                }
            });
        }

        // ç­›é€‰æ€è€ƒå†…å®¹
        function filterThoughts(category, searchTerm) {
            return thoughts.filter(thought => {
                const categoryMatch = category === 'all' || thought.category === category;
                
                // å¤„ç†æœç´¢å…³é”®è¯ä¸ºç©ºçš„æƒ…å†µ
                if (!searchTerm) {
                    return categoryMatch;
                }
                
                // å°†æœç´¢è¯åˆ†è§£ä¸ºå•è¯æ•°ç»„
                const searchWords = searchTerm.toLowerCase().split(/\s+/);
                
                // æ£€æŸ¥æ ‡é¢˜å’Œå†…å®¹æ˜¯å¦åŒ…å«æ‰€æœ‰æœç´¢è¯
                const searchMatch = searchWords.every(word => {
                    // ç®€åŒ–åŒ¹é…é€»è¾‘ï¼Œä¸ä½¿ç”¨å•è¯è¾¹ç•Œæ–­è¨€
                    return thought.title.toLowerCase().includes(word) || 
                        thought.content.toLowerCase().includes(word);
                });
                
                return categoryMatch && searchMatch;
            });
        }

        // æœç´¢æˆ–ç­›é€‰åæ›´æ–°ç±»åˆ«è®¡æ•°ï¼ˆæ˜¾ç¤ºå½“å‰ç­›é€‰æ¡ä»¶ä¸‹çš„è®¡æ•°ï¼‰
        function updateCategoryCountsAfterSearch() {
            const counts = {
                all: filterThoughts('all', currentSearchTerm).length,
                ai: filterThoughts('ai', currentSearchTerm).length,
                hobby: filterThoughts('hobby', currentSearchTerm).length,
                milestone: filterThoughts('milestone', currentSearchTerm).length,
                study: filterThoughts('study', currentSearchTerm).length,
                life: filterThoughts('life', currentSearchTerm).length,
                reading: filterThoughts('reading', currentSearchTerm).length, // æ–°å¢åˆ†ç±»è®¡æ•°
                gym: filterThoughts('gym', currentSearchTerm).length // æ–°å¢å¥èº«åˆ†ç±»è®¡æ•°
            };
            
            const categoryButtons = document.querySelectorAll('.category-btn');
            categoryButtons.forEach(button => {
                const category = button.getAttribute('data-category');
                let buttonText = '';
                
                switch(category) {
                    case 'all':
                        buttonText = 'å…¨éƒ¨';
                        break;
                    case 'ai':
                        buttonText = 'AI';
                        break;
                    case 'hobby':
                        buttonText = 'çˆ±å¥½';
                        break;
                    case 'milestone':
                        buttonText = 'å¤§äº‹è®°';
                        break;
                    case 'study':
                        buttonText = 'å­¦ä¸š';
                        break;
                    case 'life':
                        buttonText = 'ç”Ÿæ´»';
                        break;
                    case 'reading':
                        buttonText = 'è¯»ä¹¦ç¬”è®°';
                        break;
                    case 'gym':
                        buttonText = 'å¥èº«';
                        break;
                }
                
                button.textContent = `${buttonText} (${counts[category]})`;
            });
        }

        // ä¿®æ”¹åçš„æ€è€ƒå†…å®¹æ’åºé€»è¾‘
        function loadThoughts() {
            // å¦‚æœæ­£åœ¨åŠ è½½æˆ–æ•°æ®åŠ è½½å¤±è´¥ï¼Œç›´æ¥è¿”å›
            if (isLoading || dataLoadFailed) return;
            
            isLoading = true;
            
            // ç­›é€‰æ€è€ƒå†…å®¹
            const filteredThoughts = filterThoughts(currentCategory, currentSearchTerm);
            
            // æŒ‰æ—¥æœŸé™åºæ’åºï¼ˆæœ€æ–°çš„åœ¨å‰ï¼‰
            const sortedThoughts = [...filteredThoughts].sort((a, b) => {
                return new Date(b.date) - new Date(a.date); // é™åºæ’åˆ—ï¼Œæœ€æ–°çš„åœ¨å‰
            });
            
            const totalCount = sortedThoughts.length;
            
            // ç§»é™¤éª¨æ¶å±
            const skeletonCards = document.querySelectorAll('.skeleton-card');
            skeletonCards.forEach(card => {
                card.remove();
            });
            
            // è®¡ç®—æœ¬æ¬¡åŠ è½½çš„æ•°é‡
            const remainingCount = totalCount - currentCount;
            const countToLoad = Math.min(loadCount, remainingCount);
            
            // æ¨¡æ‹ŸåŠ è½½å»¶è¿Ÿ
            setTimeout(() => {
                // æ·»åŠ æ–°çš„æ€è€ƒå¡ç‰‡
                for (let i = 0; i < countToLoad; i++) {
                    const thought = sortedThoughts[currentCount + i];
                    const card = createThoughtCard(thought);
                    thoughtsContainer.appendChild(card);
                }
                
                // æ›´æ–°å½“å‰æ˜¾ç¤ºçš„æ•°é‡
                currentCount += countToLoad;
                
                // æ£€æŸ¥æ˜¯å¦è¿˜æœ‰æ›´å¤šå†…å®¹
                if (currentCount >= totalCount) {
                    noMoreContentIndicator.classList.remove('hidden');
                }
                
                isLoading = false;
            }, 1);
        }    

        // é‡ç½®å¹¶é‡æ–°åŠ è½½æ€è€ƒå†…å®¹
        function resetAndLoadThoughts() {
            // å¦‚æœæ•°æ®åŠ è½½å¤±è´¥ï¼Œä¸æ‰§è¡Œåç»­æ“ä½œ
            if (dataLoadFailed) return;
            
            // æ¸…ç©ºå®¹å™¨
            thoughtsContainer.innerHTML = '';
            
            // å¦‚æœæœç´¢è¯ä¸ä¸ºç©ºï¼Œä¸”æ²¡æœ‰ç»“æœï¼Œæ˜¾ç¤ºæç¤º
            const filteredThoughts = filterThoughts(currentCategory, currentSearchTerm);
            if (currentSearchTerm && filteredThoughts.length === 0) {
                thoughtsContainer.innerHTML = `
                    <div class="col-span-full text-center py-12">
                        <i class="fa fa-search text-4xl text-gray-300 mb-4"></i>
                        <p class="text-gray-500">æ²¡æœ‰æ‰¾åˆ°ä¸"${currentSearchTerm}"ç›¸å…³çš„å†…å®¹</p>
                    </div>
                `;
                noMoreContentIndicator.classList.add('hidden');
                
                // æ›´æ–°ç±»åˆ«è®¡æ•°ï¼ˆè€ƒè™‘æœç´¢åçš„ç»“æœï¼‰
                updateCategoryCountsAfterSearch();
                return;
            }
            
            // é‡ç½®è®¡æ•°
            currentCount = 0;
            
            // æ·»åŠ éª¨æ¶å±
            for (let i = 0; i < 3; i++) {
                const skeletonCard = document.createElement('div');
                skeletonCard.className = 'skeleton-card col-span-full md:col-span-1 lg:col-span-1 bg-white rounded-lg overflow-hidden shadow-md animate-pulse';
                skeletonCard.innerHTML = `
                    <div class="p-6">
                        <div class="flex items-center mb-3">
                            <div class="skeleton w-20 h-5 rounded-full"></div>
                            <div class="skeleton ml-2 w-24 h-4 rounded"></div>
                        </div>
                        <div class="skeleton h-8 w-${Math.floor(Math.random() * 20 + 60)}% rounded mb-4"></div>
                        <div class="skeleton h-4 w-full rounded mb-2"></div>
                        <div class="skeleton h-4 w-${Math.floor(Math.random() * 20 + 60)}% rounded mb-2"></div>
                        <div class="skeleton h-4 w-${Math.floor(Math.random() * 20 + 40)}% rounded mb-6"></div>
                        <div class="skeleton h-5 w-24 rounded"></div>
                    </div>
                `;
                thoughtsContainer.appendChild(skeletonCard);
            }
            
            // å»¶è¿ŸåŠ è½½å†…å®¹ï¼Œç»™éª¨æ¶å±æ˜¾ç¤ºæ—¶é—´
            setTimeout(() => {
                loadThoughts();
                // æ›´æ–°ç±»åˆ«è®¡æ•°ï¼ˆè€ƒè™‘ç­›é€‰åçš„ç»“æœï¼‰
                updateCategoryCountsAfterSearch();
            }, 500);
        }

        // å¤„ç†æ»šåŠ¨åŠ è½½
        function handleScroll() {
            const { scrollTop, scrollHeight, clientHeight } = document.documentElement;
            
            // å½“æ»šåŠ¨åˆ°é¡µé¢åº•éƒ¨é™„è¿‘æ—¶åŠ è½½æ›´å¤šå†…å®¹
            if (scrollTop + clientHeight >= scrollHeight - 300 && !isLoading && currentCount < thoughts.length && !dataLoadFailed) {
                loadThoughts();
            }
            
            // æ§åˆ¶è¿”å›é¡¶éƒ¨æŒ‰é’®çš„æ˜¾ç¤º/éšè—
            if (scrollTop > 300) {
                backToTopButton.classList.remove('opacity-0', 'invisible');
                backToTopButton.classList.add('opacity-100', 'visible');
                navbar.classList.add('py-2');
                navbar.classList.remove('py-3');
            } else {
                backToTopButton.classList.add('opacity-0', 'invisible');
                backToTopButton.classList.remove('opacity-100', 'visible');
                navbar.classList.remove('py-2');
                navbar.classList.add('py-3');
            }
        }

        // è¿”å›é¡¶éƒ¨
        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        // ç»Ÿä¸€å¤„ç†åˆ†ç±»ç­›é€‰
        function handleCategoryFilter() {
            // è·å–æ‰€æœ‰åˆ†ç±»æŒ‰é’®å’Œé“¾æ¥
            const categoryElements = document.querySelectorAll('[data-category]');
            
            categoryElements.forEach(element => {
                element.addEventListener('click', (e) => {
                    e.preventDefault();
                    
                    // æ›´æ–°å½“å‰åˆ†ç±»
                    currentCategory = element.getAttribute('data-category');
                    
                    // æ›´æ–°æ‰€æœ‰åˆ†ç±»æŒ‰é’®æ ·å¼
                    categoryElements.forEach(btn => {
                        if (btn.getAttribute('data-category') === currentCategory) {
                            // ä¸»åˆ†ç±»æ ‡ç­¾æŒ‰é’®
                            if (btn.classList.contains('category-btn')) {
                                btn.classList.add('bg-primary', 'text-white');
                                btn.classList.remove('bg-white', 'text-dark');
                            }
                            
                            // å¯¼èˆªèœå•ä¸­çš„åˆ†ç±»é“¾æ¥
                            if (btn.tagName === 'A') {
                                btn.classList.add('text-primary', 'font-medium');
                                btn.classList.remove('text-dark');
                            }
                        } else {
                            // ä¸»åˆ†ç±»æ ‡ç­¾æŒ‰é’®
                            if (btn.classList.contains('category-btn')) {
                                btn.classList.remove('bg-primary', 'text-white');
                                btn.classList.add('bg-white', 'text-dark');
                            }
                            
                            // å¯¼èˆªèœå•ä¸­çš„åˆ†ç±»é“¾æ¥
                            if (btn.tagName === 'A') {
                                btn.classList.remove('text-primary', 'font-medium');
                                btn.classList.add('text-dark');
                            }
                        }
                    });
                    
                    // ç§»åŠ¨ç«¯èœå•å¤„ç†
                    if (!mobileMenu.classList.contains('opacity-0')) {
                        toggleMobileMenu();
                    }
                    
                    if (!mobileCategoryMenu.classList.contains('hidden')) {
                        toggleMobileCategoryMenu();
                    }
                    
                    // é‡ç½®å¹¶åŠ è½½æ€è€ƒå†…å®¹
                    resetAndLoadThoughts();
                });
            });
        }    

        // å¤„ç†æœç´¢
        function handleSearch() {
            function performSearch() {
                // è·å–æœç´¢å…³é”®è¯
                const searchTerm = searchInput.value.trim() || mobileSearchInput.value.trim();
                
                // å¦‚æœå…³é”®è¯å˜åŒ–äº†ï¼Œæ‰æ‰§è¡Œæœç´¢
                if (searchTerm !== currentSearchTerm) {
                    currentSearchTerm = searchTerm;
                    resetAndLoadThoughts();
                }
            }
            
            // æœç´¢æŒ‰é’®äº‹ä»¶
            searchButton.addEventListener('click', performSearch);
            mobileSearchButton.addEventListener('click', performSearch);
            
            // æœç´¢è¾“å…¥æ¡†å›è½¦äº‹ä»¶
            searchInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    performSearch();
                }
            });
            
            mobileSearchInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    performSearch();
                }
            });
        }

        // åˆ‡æ¢ç§»åŠ¨ç«¯èœå•
        function toggleMobileMenu() {
            if (mobileMenu.classList.contains('opacity-0')) {
                mobileMenu.classList.remove('opacity-0', 'pointer-events-none', '-translate-y-4');
                mobileMenu.classList.add('opacity-100', 'pointer-events-auto', 'translate-y-0');
                mobileMenuButton.innerHTML = '<i class="fa fa-times text-xl"></i>';
            } else {
                mobileMenu.classList.add('opacity-0', 'pointer-events-none', '-translate-y-4');
                mobileMenu.classList.remove('opacity-100', 'pointer-events-auto', 'translate-y-0');
                mobileMenuButton.innerHTML = '<i class="fa fa-bars text-xl"></i>';
            }
        }

        // åˆ‡æ¢ç§»åŠ¨ç«¯åˆ†ç±»èœå•
        function toggleMobileCategoryMenu() {
            if (mobileCategoryMenu.classList.contains('hidden')) {
                mobileCategoryMenu.classList.remove('hidden');
                mobileCategoryButton.innerHTML = 'åˆ†ç±» <i class="fa fa-chevron-up text-xs"></i>';
            } else {
                mobileCategoryMenu.classList.add('hidden');
                mobileCategoryButton.innerHTML = 'åˆ†ç±» <i class="fa fa-chevron-down text-xs"></i>';
            }
        }

        // åˆå§‹åŒ–
        async function init() {
            // ä»JSONåŠ è½½æ•°æ®
            await loadThoughtsFromJSON();
            
            if (!dataLoadFailed) {
                // åŠ è½½åˆå§‹æ€è€ƒå†…å®¹
                resetAndLoadThoughts();
                
                // æ›´æ–°ç±»åˆ«è®¡æ•°
                updateCategoryCounts();
            }
            
            // æ³¨å†Œæ»šåŠ¨äº‹ä»¶
            window.addEventListener('scroll', handleScroll);
            
            // æ³¨å†Œè¿”å›é¡¶éƒ¨æŒ‰é’®äº‹ä»¶
            backToTopButton.addEventListener('click', scrollToTop);
            
            // æ³¨å†Œç§»åŠ¨ç«¯èœå•æŒ‰é’®äº‹ä»¶
            mobileMenuButton.addEventListener('click', toggleMobileMenu);
            
            // æ³¨å†Œç§»åŠ¨ç«¯åˆ†ç±»èœå•æŒ‰é’®äº‹ä»¶
            mobileCategoryButton.addEventListener('click', toggleMobileCategoryMenu);
            
            // æ³¨å†Œåˆ†ç±»ç­›é€‰äº‹ä»¶ - ä½¿ç”¨ç»Ÿä¸€çš„å¤„ç†å‡½æ•°
            handleCategoryFilter();
            
            // æ³¨å†Œæœç´¢äº‹ä»¶
            handleSearch();
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', init);




        // æ–°å¢ï¼ˆ2025-07-20T12:02ï¼‰
        // æ”¶é›†ç”¨æˆ·ä¿¡æ¯å¹¶å‘é€åˆ°æœåŠ¡å™¨
        document.addEventListener('DOMContentLoaded', () => {
        // â‘  é‡‡é›†åŸºæœ¬ä¿¡æ¯
        const userInfo = {
            startTime: new Date().toISOString(),
            userAgent: navigator.userAgent,
            referrer: document.referrer,
            interactions: []
        };

        // â‘¡ è®°å½•ç‚¹å‡»ç­‰äº¤äº’
        document.addEventListener('click', event => {
            userInfo.interactions.push({
            time: new Date().toISOString(),
            type: 'click',
            target: event.target.tagName,
            text: (event.target.innerText || '').slice(0, 50)
            });
        });

        // â‘¢ ç»Ÿä¸€å‘é€å‡½æ•°
        function flush() {
            userInfo.endTime = new Date().toISOString();   // æ›´æ–°ç¦»å¼€æ—¶é—´
            const payload = JSON.stringify(userInfo);

            // é¦–é€‰ sendBeaconï¼›è‹¥ä¸æ”¯æŒæˆ–å¤±è´¥åˆ™ç”¨ fetch keepalive
            if (!navigator.sendBeacon || !navigator.sendBeacon('./collect.php', payload)) {
            fetch('./collect.php', {
                method: 'POST',
                headers: { 'Content-Type': 'text/plain;charset=UTF-8' },
                body: payload,
                keepalive: true        // å…³é”®ï¼šå…è®¸åœ¨ pagehide åç»§ç»­ä¼ è¾“
            });
            }
        }

        // â‘£ åœ¨æ ‡ç­¾é¡µè¿›å…¥åå°æˆ–å°†è¢«å¸è½½æ—¶å‘é€
        document.addEventListener('visibilitychange', () => {
            if (document.visibilityState === 'hidden') flush();
        });

        // â‘¤ pagehide æ˜¯ iOS Safari çš„å…œåº•ï¼ˆonce: true ä¿è¯åªè§¦å‘ä¸€æ¬¡ï¼‰
        window.addEventListener('pagehide', flush, { once: true });
        });

        // ç‚¹å‡»å¿ƒå½¢æ•ˆæœ
        document.addEventListener('click', function(e) {
            const hearts = ['â¤ï¸', 'ğŸ§¡', 'ğŸ’›', 'ğŸ’š', 'ğŸ’™', 'ğŸ’œ', 'ğŸ’–', 'ğŸ’—', 'ğŸ’“', 'ğŸ’'];
            
            const heart = document.createElement('div');
            heart.className = 'heart-animation';
            heart.innerHTML = hearts[Math.floor(Math.random() * hearts.length)];
            
            heart.style.left = (e.clientX - 12) + 'px';
            heart.style.top = (e.clientY - 12) + 'px';
            
            document.body.appendChild(heart);
            
            setTimeout(() => {
                heart.remove();
            }, 4000);
        });

    </script>
</body>
</html>
    
