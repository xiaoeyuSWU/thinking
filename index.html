<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MindLog_real | SambyLi</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#4A6FA5',
                        secondary: '#E07A5F',
                        neutral: '#F4F1DE',
                        dark: '#3D405B',
                        accent: '#81B29A',
                    },
                    fontFamily: {
                        inter: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .text-balance {
                text-wrap: balance;
            }
            .card-hover {
                transition: all 0.3s ease;
                box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            }
            .card-hover:hover {
                box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
                transform: translateY(-2px);
            }
            .nav-shadow {
                box-shadow: 0 4px 20px -2px rgba(0, 0, 0, 0.1);
            }
            .skeleton {
                background-color: #e2e8f0;
                animation: pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite;
                border-radius: 0.25rem;
            }
            @keyframes pulse {
                0%, 100% {
                    opacity: 1;
                }
                50% {
                    opacity: 0.5;
                }
            }
            .image-grid {
                display: grid;
                gap: 8px;
                grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            }
            .image-container {
                aspect-ratio: 1;
                border-radius: 8px;
                overflow: hidden;
            }
            .image-container img {
                width: 100%;
                height: 100%;
                object-fit: cover;
                transition: transform 0.3s ease;
            }
            .image-container:hover img {
                transform: scale(1.05);
            }
        }
    </style>
    <style>
        /* 自定义样式 */
        .transition-all {
            transition-property: all;
            transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
            transition-duration: 300ms;
        }
        .hover-shadow-lg:hover {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .hover-translate-y-1:hover {
            transform: translateY(-1px);
        }
        .focus-ring-2:focus {
            outline: 2px solid transparent;
            outline-offset: 2px;
        }
        .focus-ring-primary-300:focus {
            box-shadow: 0 0 0 3px rgba(74, 111, 165, 0.3);
        }
        .focus-border-primary:focus {
            border-color: #4A6FA5;
        }
        .text-gray-400 {
            color: #9CA3AF;
        }
        .text-primary {
            color: #4A6FA5;
        }
        .hover-text-primary:hover {
            color: #4A6FA5;
        }
        .bg-primary {
            background-color: #4A6FA5;
        }
        .text-white {
            color: white;
        }
        .bg-white {
            background-color: white;
        }
        .text-dark {
            color: #3D405B;
        }
        .rounded-full {
            border-radius: 9999px;
        }
        .border {
            border-width: 1px;
        }
        .border-gray-200 {
            border-color: #E5E7EB;
        }
        .py-2 {
            padding-top: 0.5rem;
            padding-bottom: 0.5rem;
        }
        .px-4 {
            padding-left: 1rem;
            padding-right: 1rem;
        }
        .pl-10 {
            padding-left: 2.5rem;
        }
        .pr-4 {
            padding-right: 1rem;
        }
        .w-full {
            width: 100%;
        }
        .absolute {
            position: absolute;
        }
        .right-3 {
            right: 0.75rem;
        }
        .left-3 {
            left: 0.75rem;
        }
        .top-1-2 {
            top: 50%;
        }
        .transform {
            transform: translateY(-50%);
        }
        .opacity-0 {
            opacity: 0;
        }
        .opacity-100 {
            opacity: 1;
        }
        .invisible {
            visibility: hidden;
        }
        .visible {
            visibility: visible;
        }
        .py-3 {
            padding-top: 0.75rem;
            padding-bottom: 0.75rem;
        }
        .py-2 {
            padding-top: 0.5rem;
            padding-bottom: 0.5rem;
        }
        
        /* 密码验证界面样式（修改为全屏模态框） */
        .password-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #4A6FA5 0%, #3D405B 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 999;
            transition: opacity 0.5s ease;
        }
        
        .password-card {
            background-color: white;
            border-radius: 16px;
            box-shadow: 0 10px 50px rgba(0, 0, 0, 0.2);
            max-width: 400px;
            width: 100%;
            padding: 40px;
            transform: translateY(0);
            transition: transform 0.5s ease, box-shadow 0.5s ease;
        }
        
        .password-card:hover {
            box-shadow: 0 15px 60px rgba(0, 0, 0, 0.3);
            transform: translateY(-5px);
        }
        
        .password-icon {
            width: 80px;
            height: 80px;
            background-color: #4A6FA5;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 30px;
            color: white;
            font-size: 32px;
            transition: all 0.3s ease;
        }
        
        .password-icon:hover {
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(74, 111, 165, 0.5);
        }
        
        .password-input {
            padding: 12px 16px;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
            width: 100%;
            transition: all 0.2s ease;
        }
        
        .password-input:focus {
            outline: none;
            border-color: #4A6FA5;
            box-shadow: 0 0 0 3px rgba(74, 111, 165, 0.2);
        }
        
        .password-button {
            background-color: #4A6FA5;
            color: white;
            padding: 12px 16px;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.2s ease;
            cursor: pointer;
            width: 100%;
        }
        
        .password-button:hover {
            background-color: #3a5a85;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(74, 111, 165, 0.3);
        }
        
        .password-button:active {
            transform: translateY(0);
            box-shadow: 0 2px 6px rgba(74, 111, 165, 0.3);
        }
        
        .password-error {
            color: #e07a5f;
            font-size: 14px;
            margin-top: 10px;
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s ease;
        }
        
        .password-error.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* 内容淡入效果 */
        .content-fade-in {
            animation: fadeIn 0.5s ease forwards;
            opacity: 0;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* 图片预览样式 */
        .image-preview {
            height: 180px;
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 12px;
        }
        
        .image-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }
        
        .image-preview:hover img {
            transform: scale(1.03);
        }
        
        .image-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .image-modal-content {
            max-width: 90%;
            max-height: 90%;
            position: relative;
        }
        
        .image-modal-content img {
            max-width: 100%;
            max-height: 90vh;
            object-fit: contain;
        }
        
        .image-modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            color: white;
            font-size: 24px;
            cursor: pointer;
            background: rgba(0,0,0,0.5);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="font-inter bg-neutral/30 text-dark min-h-screen flex flex-col">
    <!-- 密码验证界面（修改为模态框） -->
    <div id="password-modal" class="password-modal">
        <div class="password-card">
            <div class="password-icon">
                <i class="fa fa-lock"></i>
            </div>
            <h2 class="text-2xl font-bold text-center text-dark mb-2">私密内容</h2>
            <p class="text-gray-500 text-center mb-8">请输入密码访问</p>
            
            <form id="password-form" class="space-y-4">
                <div>
                    <label for="password" class="block text-sm font-medium text-gray-700 mb-1">密码</label>
                    <div class="relative">
                        <input 
                            type="password" 
                            id="password" 
                            class="password-input focus:ring-primary-300 focus:border-primary"
                            placeholder="请输入密码"
                            required
                        >
                        <button type="button" id="toggle-password" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-primary transition-colors">
                            <i class="fa fa-eye-slash"></i>
                        </button>
                    </div>
                </div>
                
                <div class="password-error" id="password-error">密码错误，请重试</div>
                
                <button type="submit" class="password-button hover-shadow-lg hover-translate-y-1">
                    确认
                </button>
            </form>
        </div>
    </div>

    <!-- 导航栏 -->
    <header id="navbar" class="fixed w-full bg-white/90 backdrop-blur-sm z-50 transition-all duration-300 content-fade-in" style="opacity: 0; visibility: hidden;">
        <div class="container mx-auto px-4 py-3 flex items-center justify-between nav-shadow">
            <a href="#" class="flex items-center space-x-2">
                <span class="text-primary text-2xl"><i class="fa fa-lightbulb-o"></i></span>
                <span class="font-bold text-xl text-dark">MindLog_real</span>
            </a>
            
            <!-- 桌面端导航 -->
            <nav class="hidden md:flex items-center space-x-8">
                <a href="#" class="font-medium text-dark hover:text-primary transition-colors">首页</a>
                <div class="relative group">
                    <button class="font-medium text-dark hover:text-primary transition-colors flex items-center">
                        分类
                        <i class="fa fa-chevron-down ml-1 text-xs"></i>
                    </button>
                    <div class="absolute left-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 z-50">
                        <a href="#" data-category="all" class="block px-4 py-2 text-sm hover:bg-primary/10 hover:text-primary">全部</a>
                        <a href="#" data-category="xueye" class="block px-4 py-2 text-sm hover:bg-primary/10 hover:text-primary">学业</a>
                        <a href="#" data-category="shiye" class="block px-4 py-2 text-sm hover:bg-primary/10 hover:text-primary">事业</a>
                        <a href="#" data-category="ganqing" class="block px-4 py-2 text-sm hover:bg-primary/10 hover:text-primary">感情</a>
                        <a href="#" data-category="shenghuo" class="block px-4 py-2 text-sm hover:bg-primary/10 hover:text-primary">生活</a>
                        <a href="#" data-category="qita" class="block px-4 py-2 text-sm hover:bg-primary/10 hover:text-primary">其他</a>
                    </div>
                </div>
                <a href="#about" class="font-medium text-dark hover:text-primary transition-colors">关于</a>
            </nav>
            
            <!-- 搜索框 -->
            <div class="relative hidden md:block w-64">
                <div class="relative">
                    <input id="search-input" type="text" placeholder="搜索内容..." class="w-full pl-10 pr-10 py-2 rounded-full border border-gray-200 focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary transition-all">
                    <button id="search-button" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-primary transition-colors">
                        <i class="fa fa-long-arrow-right"></i>
                    </button>
                    <i class="fa fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                </div>
            </div>
            
            <!-- 移动端菜单按钮 -->
            <button id="mobile-menu-button" class="md:hidden text-dark focus:outline-none">
                <i class="fa fa-bars text-xl"></i>
            </button>
        </div>
        
        <!-- 移动端导航菜单 -->
        <div id="mobile-menu" class="md:hidden bg-white shadow-lg absolute w-full left-0 top-full opacity-0 transition-all duration-300 transform -translate-y-4 pointer-events-none">
            <div class="container mx-auto px-4 py-3">
                <div class="relative mb-4">
                    <div class="relative">
                        <input id="mobile-search-input" type="text" placeholder="搜索内容..." class="w-full pl-10 pr-10 py-2 rounded-full border border-gray-200 focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary transition-all">
                        <button id="mobile-search-button" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-primary transition-colors">
                            <i class="fa fa-long-arrow-right"></i>
                        </button>
                        <i class="fa fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                    </div>
                </div>
                <nav class="flex flex-col space-y-3">
                    <a href="#" class="font-medium text-dark hover:text-primary transition-colors py-2">首页</a>
                    <div class="relative">
                        <button id="mobile-category-button" class="font-medium text-dark hover:text-primary transition-colors flex items-center justify-between py-2">
                            分类
                            <i class="fa fa-chevron-down text-xs"></i>
                        </button>
                        <div id="mobile-category-menu" class="mt-1 ml-4 hidden">
                            <a href="#" data-category="all" class="block py-2 text-sm">全部</a>
                            <a href="#" data-category="xueye" class="block py-2 text-sm">学业</a>
                            <a href="#" data-category="shiye" class="block py-2 text-sm">事业</a>
                            <a href="#" data-category="ganqing" class="block py-2 text-sm">感情</a>
                            <a href="#" data-category="shenghuo" class="block py-2 text-sm">生活</a>
                            <a href="#" data-category="qita" class="block py-2 text-sm">其他</a>
                        </div>
                    </div>
                    <a href="#about" class="font-medium text-dark hover:text-primary transition-colors py-2">关于</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- 主内容区 -->
    <main class="flex-grow pt-20 pb-10 content-fade-in" style="opacity: 0; visibility: hidden;">
        <div class="container mx-auto px-4">
            <!-- 页面标题 -->
            <div class="text-center mb-12 mt-6">
                <h1 class="text-[clamp(2rem,5vw,3rem)] font-bold text-dark mb-3">MindLog_real</h1>
                <p class="text-gray-600 max-w-2xl mx-auto text-balance">一个生动和立体的李博远^ ^</p>
                <p class="text-gray-600 max-w-2xl mx-auto text-balance">一个爱记录的李博远^ ^</p>

            </div>
            
            <!-- 分类标签 -->
            <div class="flex flex-wrap justify-center gap-2 mb-10">
                <button data-category="all" class="category-btn bg-primary text-white px-4 py-2 rounded-full text-sm font-medium transition-all">全部</button>
                <button data-category="xueye" class="category-btn bg-white text-dark px-4 py-2 rounded-full text-sm font-medium transition-all">学业</button>
                <button data-category="shiye" class="category-btn bg-white text-dark px-4 py-2 rounded-full text-sm font-medium transition-all">事业</button>
                <button data-category="ganqing" class="category-btn bg-white text-dark px-4 py-2 rounded-full text-sm font-medium transition-all">感情</button>
                <button data-category="shenghuo" class="category-btn bg-white text-dark px-4 py-2 rounded-full text-sm font-medium transition-all">生活</button>
                <button data-category="qita" class="category-btn bg-white text-dark px-4 py-2 rounded-full text-sm font-medium transition-all">其他</button>
            </div>
            
            <!-- 思考内容流 -->
            <div id="thoughts-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- 骨架屏加载效果 -->
                <div class="skeleton-card col-span-full md:col-span-1 lg:col-span-1 bg-white rounded-lg overflow-hidden shadow-md animate-pulse">
                    <div class="p-6">
                        <div class="flex items-center mb-3">
                            <div class="skeleton w-20 h-5 rounded-full"></div>
                            <div class="skeleton ml-2 w-24 h-4 rounded"></div>
                        </div>
                        <div class="skeleton h-8 w-3/4 rounded mb-4"></div>
                        <div class="skeleton h-4 w-full rounded mb-2"></div>
                        <div class="skeleton h-4 w-5/6 rounded mb-2"></div>
                        <div class="skeleton h-4 w-2/3 rounded mb-6"></div>
                        <div class="skeleton h-5 w-24 rounded"></div>
                    </div>
                </div>
                <div class="skeleton-card col-span-full md:col-span-1 lg:col-span-1 bg-white rounded-lg overflow-hidden shadow-md animate-pulse">
                    <div class="p-6">
                        <div class="flex items-center mb-3">
                            <div class="skeleton w-20 h-5 rounded-full"></div>
                            <div class="skeleton ml-2 w-24 h-4 rounded"></div>
                        </div>
                        <div class="skeleton h-8 w-2/3 rounded mb-4"></div>
                        <div class="skeleton h-4 w-full rounded mb-2"></div>
                        <div class="skeleton h-4 w-5/6 rounded mb-2"></div>
                        <div class="skeleton h-4 w-3/4 rounded mb-6"></div>
                        <div class="skeleton h-5 w-24 rounded"></div>
                    </div>
                </div>
                <div class="skeleton-card col-span-full md:col-span-1 lg:col-span-1 bg-white rounded-lg overflow-hidden shadow-md animate-pulse">
                    <div class="p-6">
                        <div class="flex items-center mb-3">
                            <div class="skeleton w-20 h-5 rounded-full"></div>
                            <div class="skeleton ml-2 w-24 h-4 rounded"></div>
                        </div>
                        <div class="skeleton h-8 w-4/5 rounded mb-4"></div>
                        <div class="skeleton h-4 w-full rounded mb-2"></div>
                        <div class="skeleton h-4 w-5/6 rounded mb-2"></div>
                        <div class="skeleton h-4 w-3/4 rounded mb-6"></div>
                        <div class="skeleton h-5 w-24 rounded"></div>
                    </div>
                </div>
            </div>
            
            <!-- 没有更多内容 -->
            <div id="no-more-content" class="text-center py-10 hidden">
                <p class="text-gray-500">我也是有底线滴~</p>
            </div>
        </div>
    </main>

    <!-- 关于部分 -->
    <section id="about" class="bg-white py-16 content-fade-in" style="opacity: 0; visibility: hidden;">
        <div class="container mx-auto px-4">
            <div class="max-w-3xl mx-auto text-center">
                <h2 class="text-[clamp(1.5rem,3vw,2rem)] font-bold text-dark mb-6">关于MindLog_real</h2>
                <p class="text-gray-600 mb-8 leading-relaxed">
                    这里是我通过文字和图片记录自己的地方，尤其是记录自己的大学生活。<br>
                    这将会是我最最最最宝贵的数字资源。
                </p>
                <div class="flex justify-center space-x-4">
                    <a href="mailto:1920295921@qq.com" target="_blank" class="text-primary hover:text-primary/80 transition-colors">
                        <i class="fa fa-envelope-o text-xl"></i>
                    </a>
                    <a href="https://github.com/xiaoeyuSWU" target="_blank" class="text-primary hover:text-primary/80 transition-colors">
                        <i class="fa fa-github text-xl"></i>
                    </a>
                    <a href="https://liboyuan.com.cn/" target="_blank" class="text-primary hover:text-primary/80 transition-colors">
                        <i class="fa fa-globe text-xl"></i>
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- 页脚 -->
    <footer class="bg-dark text-white py-8 content-fade-in" style="opacity: 0; visibility: hidden;">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-4 md:mb-0 text-center md:text-left">
                    <a href="#" class="flex items-center justify-center md:justify-start space-x-2">
                        <span class="text-white text-xl"><i class="fa fa-lightbulb-o"></i></span>
                        <span class="font-bold text-lg">MindLog_real</span>
                    </a>
                    <p class="text-gray-400 text-sm mt-1">记录思考，见证成长</p>
                </div>
                <div class="text-gray-400 text-sm">
                    &copy; 2025 MindLog_real | 保留所有权利
                </div>
            </div>
        </div>
    </footer>

    <!-- 返回顶部按钮 -->
    <button id="back-to-top" class="fixed bottom-6 right-6 bg-primary text-white w-10 h-10 rounded-full flex items-center justify-center shadow-lg opacity-0 invisible transition-all duration-300 hover:bg-primary/90 focus:outline-none">
        <i class="fa fa-chevron-up"></i>
    </button>

    <script>
        // 密码验证
        const PASSWORD = '513870';
        const passwordModal = document.getElementById('password-modal');
        const passwordForm = document.getElementById('password-form');
        const passwordInput = document.getElementById('password');
        const passwordError = document.getElementById('password-error');
        const togglePassword = document.getElementById('toggle-password');
        const contentElements = document.querySelectorAll('.content-fade-in');
        const navbar = document.getElementById('navbar');
        
        // 显示内容
        function showContent() {
            passwordModal.style.opacity = '0';
            setTimeout(() => {
                passwordModal.style.display = 'none';
            }, 500);
            
            // 显示内容并添加淡入动画
            contentElements.forEach(element => {
                element.style.opacity = '1';
                element.style.visibility = 'visible';
            });
            
            // 延迟显示导航栏，使动画更流畅
            setTimeout(() => {
                navbar.style.opacity = '1';
                navbar.style.visibility = 'visible';
            }, 200);
        }
        
        // 密码表单提交处理
        passwordForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            const enteredPassword = passwordInput.value.trim();
            
            if (enteredPassword === PASSWORD) {
                // 密码正确，不使用localStorage保存验证状态
                showContent();
            } else {
                // 密码错误
                passwordError.classList.add('show');
                passwordInput.classList.add('border-red-500');
                
                // 3秒后重置错误提示
                setTimeout(() => {
                    passwordError.classList.remove('show');
                    passwordInput.classList.remove('border-red-500');
                }, 3000);
            }
        });
        
        // 切换密码可见性
        togglePassword.addEventListener('click', () => {
            const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
            passwordInput.setAttribute('type', type);
            togglePassword.innerHTML = type === 'password' ? '<i class="fa fa-eye-slash"></i>' : '<i class="fa fa-eye"></i>';
        });
        
        // 思考内容数据（将从JSON文件加载）
        let thoughts = [];
        
        // 当前显示的思考数量
        let currentCount = 0;
        // 每次加载的数量
        const loadCount = 500;
        // 当前筛选的分类
        let currentCategory = 'all';
        // 当前搜索关键词
        let currentSearchTerm = '';
        // 是否正在加载
        let isLoading = false;
        // 是否数据加载失败
        let dataLoadFailed = false;

        // DOM 元素
        const thoughtsContainer = document.getElementById('thoughts-container');
        const noMoreContentIndicator = document.getElementById('no-more-content');
        const backToTopButton = document.getElementById('back-to-top');
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        const mobileCategoryButton = document.getElementById('mobile-category-button');
        const mobileCategoryMenu = document.getElementById('mobile-category-menu');
        const searchInput = document.getElementById('search-input');
        const mobileSearchInput = document.getElementById('mobile-search-input');
        const searchButton = document.getElementById('search-button');
        const mobileSearchButton = document.getElementById('mobile-search-button');
        const categoryButtons = document.querySelectorAll('.category-btn');

        // 分类名称映射
        const categoryNames = {
            'xueye': '学业',
            'shiye': '事业',
            'ganqing': '感情',
            'shenghuo': '生活',
            'qita': '其他'
        };

        // 分类颜色映射
        const categoryColors = {
            'xueye': 'bg-blue-500',
            'shiye': 'bg-purple-500',
            'ganqing': 'bg-orange-500',
            'shenghuo': 'bg-green-500',
            'qita': 'bg-pink-500'
        };

        // 从JSON文件加载思考内容
        async function loadThoughtsFromJSON() {
            try {
                const response = await fetch('thoughts_me.json');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                thoughts = await response.json();
                dataLoadFailed = false;
            } catch (error) {
                console.error('Failed to load thoughts data:', error);
                dataLoadFailed = true;
                
                // 显示错误信息
                thoughtsContainer.innerHTML = `
                    <div class="col-span-full text-center py-12">
                        <i class="fa fa-exclamation-triangle text-4xl text-red-400 mb-4"></i>
                        <p class="text-gray-500">加载思考内容失败，请检查网络连接或数据文件。</p>
                    </div>
                `;
            }
        }

        // 计算每个类别的内容数量
        function calculateCategoryCounts() {
            const counts = {
                all: thoughts.length,
                xueye: 0,
                shiye: 0,
                ganqing: 0,
                shenghuo: 0,
                qita: 0
            };
            
            thoughts.forEach(thought => {
                if (counts[thought.category]) {
                    counts[thought.category]++;
                }
            });
            
            return counts;
        }

        // 更新类别按钮的计数显示
        function updateCategoryCounts() {
            const counts = calculateCategoryCounts();
            const categoryButtons = document.querySelectorAll('.category-btn');
            
            categoryButtons.forEach(button => {
                const category = button.getAttribute('data-category');
                let buttonText = '';
                
                switch(category) {
                    case 'all':
                        buttonText = '全部';
                        break;
                    case 'xueye':
                        buttonText = '学业';
                        break;
                    case 'shiye':
                        buttonText = '事业';
                        break;
                    case 'ganqing':
                        buttonText = '感情';
                        break;
                    case 'shenghuo':
                        buttonText = '生活';
                        break;
                    case 'qita':
                        buttonText = '其他';
                        break;
                }
                
                button.textContent = `${buttonText} (${counts[category]})`;
            });
        }

        // 创建思考卡片
        function createThoughtCard(thought) {
            const card = document.createElement('article');
            card.className = `bg-white rounded-lg overflow-hidden shadow-md card-hover transition-all duration-300`;
            card.setAttribute('data-category', thought.category);
            
            // 处理内容中的换行符
            const formattedContent = thought.content.replace(/\n/g, '<br>');
            
            // 处理图片预览
            let imagesHtml = '';
            if (thought.media && thought.media.length > 0) {
                // 只显示第一张图片作为预览
                const firstImage = thought.media[0];
                imagesHtml = `
                    <div class="image-preview cursor-pointer">
                        <img 
                            src="pic/${firstImage}" 
                            alt="${thought.title}" 
                            loading="lazy"
                            data-all-images='${JSON.stringify(thought.media)}'
                        >
                    </div>
                `;
            }
            
            // 卡片内容
            card.innerHTML = `
                <div class="p-6">
                    <div class="flex items-center mb-3">
                        <span class="inline-block px-2 py-1 rounded-full text-xs font-medium ${categoryColors[thought.category]} text-white">
                            ${categoryNames[thought.category]}
                        </span>
                        <span class="ml-2 text-sm text-gray-500">${formatDate(thought.date)}</span>
                    </div>
                    <h3 class="text-xl font-bold mt-4 mb-3 text-dark">${thought.title}</h3>
                    ${imagesHtml}
                    <p class="text-gray-600 mb-4 line-clamp-4">${formattedContent}</p>
                    <button class="read-more-btn text-primary font-medium hover:text-primary/80 transition-colors flex items-center">
                        阅读更多
                        <i class="fa fa-long-arrow-right ml-1"></i>
                    </button>
                </div>
            `;
            
            // 添加阅读更多事件
            const readMoreBtn = card.querySelector('.read-more-btn');
            readMoreBtn.addEventListener('click', () => {
                showThoughtDetail(thought);
            });
            
            // 添加图片预览点击事件
            if (thought.media && thought.media.length > 0) {
                const imagePreview = card.querySelector('.image-preview');
                imagePreview.addEventListener('click', (e) => {
                    const imgElement = e.currentTarget.querySelector('img');
                    const allImages = JSON.parse(imgElement.dataset.allImages);
                    showImageGallery(allImages);
                });
            }
            
            return card;
        }

        // 格式化日期
        function formatDate(dateString) {
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            return new Date(dateString).toLocaleDateString('zh-CN', options);
        }

        // 显示思考详情
        function showThoughtDetail(thought) {
            // 处理内容中的换行符
            const formattedContent = thought.content.replace(/\n/g, '<br>');
            
            // 处理图片网格
            let imagesHtml = '';
            if (thought.media && thought.media.length > 0) {
                imagesHtml = `
                    <div class="mt-6">
                        <h4 class="text-lg font-semibold mb-3 text-dark">相关图片</h4>
                        <div class="image-grid">
                            ${thought.media.map(image => `
                                <div class="image-container cursor-pointer">
                                    <img 
                                        src="pic/${image}" 
                                        alt="${thought.title}" 
                                        loading="lazy"
                                        data-all-images='${JSON.stringify(thought.media)}'
                                    >
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }
            
            // 创建遮罩层
            const overlay = document.createElement('div');
            overlay.className = 'fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4';
            
            // 创建模态框
            const modal = document.createElement('div');
            modal.className = 'bg-white rounded-lg max-w-3xl w-full max-h-[90vh] overflow-auto';
            
            // 模态框内容
            modal.innerHTML = `
                <div class="p-6">
                    <div class="flex justify-between items-center mb-4">
                        <div class="flex items-center">
                            <span class="inline-block px-2 py-1 rounded-full text-xs font-medium ${categoryColors[thought.category]} text-white">
                                ${categoryNames[thought.category]}
                            </span>
                            <span class="ml-2 text-sm text-gray-500">${formatDate(thought.date)}</span>
                        </div>
                        <button class="close-modal text-gray-400 hover:text-gray-600 transition-colors">
                            <i class="fa fa-times text-xl"></i>
                        </button>
                    </div>
                    <h2 class="text-2xl font-bold mt-6 mb-4 text-dark">${thought.title}</h2>
                    <p class="text-gray-700 leading-relaxed">${formattedContent}</p>
                    ${imagesHtml}
                </div>
            `;
            
            // 添加到页面
            overlay.appendChild(modal);
            document.body.appendChild(overlay);
            
            // 关闭模态框
            const closeModalBtn = modal.querySelector('.close-modal');
            closeModalBtn.addEventListener('click', () => {
                document.body.removeChild(overlay);
            });
            
            // 点击遮罩层关闭
            overlay.addEventListener('click', (e) => {
                if (e.target === overlay) {
                    document.body.removeChild(overlay);
                }
            });
            
            // 键盘ESC关闭
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    document.body.removeChild(overlay);
                }
            });
            
            // 为详情页中的图片添加点击事件
            if (thought.media && thought.media.length > 0) {
                const imageContainers = modal.querySelectorAll('.image-container');
                imageContainers.forEach(container => {
                    container.addEventListener('click', (e) => {
                        const imgElement = e.currentTarget.querySelector('img');
                        const allImages = JSON.parse(imgElement.dataset.allImages);
                        showImageGallery(allImages);
                    });
                });
            }
        }
        
        // 显示图片画廊 - 修改后的版本
        function showImageGallery(images) {
            const overlay = document.createElement('div');
            overlay.className = 'image-modal';
            
            // 创建图片容器
            const content = document.createElement('div');
            content.className = 'image-modal-content';
            
            // 当前显示的图片索引
            let currentIndex = 0;
            
            // 添加图片
            const img = document.createElement('img');
            img.src = `pic/${images[currentIndex]}`;
            img.alt = '图片预览';
            content.appendChild(img);
            
            // 添加关闭按钮
            const closeBtn = document.createElement('div');
            closeBtn.className = 'image-modal-close';
            closeBtn.innerHTML = '<i class="fa fa-times"></i>';
            content.appendChild(closeBtn);
            
            // 添加左右箭头导航
            const prevBtn = document.createElement('div');
            prevBtn.className = 'absolute left-4 top-1/2 -translate-y-1/2 bg-black/50 text-white w-10 h-10 rounded-full flex items-center justify-center cursor-pointer';
            prevBtn.innerHTML = '<i class="fa fa-chevron-left"></i>';
            content.appendChild(prevBtn);
            
            const nextBtn = document.createElement('div');
            nextBtn.className = 'absolute right-4 top-1/2 -translate-y-1/2 bg-black/50 text-white w-10 h-10 rounded-full flex items-center justify-center cursor-pointer';
            nextBtn.innerHTML = '<i class="fa fa-chevron-right"></i>';
            content.appendChild(nextBtn);
            
            // 添加图片指示器
            const indicator = document.createElement('div');
            indicator.className = 'absolute bottom-4 left-1/2 -translate-x-1/2 bg-black/50 text-white px-3 py-1 rounded-full text-sm';
            indicator.textContent = `${currentIndex + 1}/${images.length}`;
            content.appendChild(indicator);
            
            overlay.appendChild(content);
            document.body.appendChild(overlay);
            
            // 更新图片显示
            function updateImage() {
                img.src = `pic/${images[currentIndex]}`;
                indicator.textContent = `${currentIndex + 1}/${images.length}`;
            }
            
            // 上一张图片
            prevBtn.addEventListener('click', () => {
                currentIndex = (currentIndex - 1 + images.length) % images.length;
                updateImage();
            });
            
            // 下一张图片
            nextBtn.addEventListener('click', () => {
                currentIndex = (currentIndex + 1) % images.length;
                updateImage();
            });
            
            // 键盘导航
            document.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowLeft') {
                    currentIndex = (currentIndex - 1 + images.length) % images.length;
                    updateImage();
                } else if (e.key === 'ArrowRight') {
                    currentIndex = (currentIndex + 1) % images.length;
                    updateImage();
                } else if (e.key === 'Escape') {
                    document.body.removeChild(overlay);
                }
            });
            
            // 关闭事件
            closeBtn.addEventListener('click', () => {
                document.body.removeChild(overlay);
                // 移除键盘事件监听
                document.removeEventListener('keydown', handleKeydown);
            });
            
            // 点击遮罩层关闭
            overlay.addEventListener('click', (e) => {
                if (e.target === overlay) {
                    document.body.removeChild(overlay);
                    // 移除键盘事件监听
                    document.removeEventListener('keydown', handleKeydown);
                }
            });
            
            // 键盘事件处理函数
            function handleKeydown(e) {
                if (e.key === 'ArrowLeft') {
                    currentIndex = (currentIndex - 1 + images.length) % images.length;
                    updateImage();
                } else if (e.key === 'ArrowRight') {
                    currentIndex = (currentIndex + 1) % images.length;
                    updateImage();
                } else if (e.key === 'Escape') {
                    document.body.removeChild(overlay);
                    document.removeEventListener('keydown', handleKeydown);
                }
            }
            
            // 添加键盘事件监听
            document.addEventListener('keydown', handleKeydown);
        }

        // 筛选思考内容
        function filterThoughts(category, searchTerm) {
            return thoughts.filter(thought => {
                const categoryMatch = category === 'all' || thought.category === category;
                
                // 处理搜索关键词为空的情况
                if (!searchTerm) {
                    return categoryMatch;
                }
                
                // 将搜索词分解为单词数组
                const searchWords = searchTerm.toLowerCase().split(/\s+/);
                
                // 检查标题和内容是否包含所有搜索词
                const searchMatch = searchWords.every(word => {
                    // 简化匹配逻辑，不使用单词边界断言
                    return thought.title.toLowerCase().includes(word) || 
                        thought.content.toLowerCase().includes(word);
                });
                
                return categoryMatch && searchMatch;
            });
        }

        // 搜索或筛选后更新类别计数（显示当前筛选条件下的计数）
        function updateCategoryCountsAfterSearch() {
            const counts = {
                all: filterThoughts('all', currentSearchTerm).length,
                xueye: filterThoughts('xueye', currentSearchTerm).length,
                shiye: filterThoughts('shiye', currentSearchTerm).length,
                ganqing: filterThoughts('ganqing', currentSearchTerm).length,
                shenghuo: filterThoughts('shenghuo', currentSearchTerm).length,
                qita: filterThoughts('qita', currentSearchTerm).length
            };
            
            const categoryButtons = document.querySelectorAll('.category-btn');
            categoryButtons.forEach(button => {
                const category = button.getAttribute('data-category');
                let buttonText = '';
                
                switch(category) {
                    case 'all':
                        buttonText = '全部';
                        break;
                    case 'xueye':
                        buttonText = '学业';
                        break;
                    case 'shiye':
                        buttonText = '事业';
                        break;
                    case 'ganqing':
                        buttonText = '感情';
                        break;
                    case 'shenghuo':
                        buttonText = '生活';
                        break;
                    case 'qita':
                        buttonText = '其他';
                        break;
                }
                
                button.textContent = `${buttonText} (${counts[category]})`;
            });
        }

        // 修改后的思考内容排序逻辑
        function loadThoughts() {
            // 如果正在加载或数据加载失败，直接返回
            if (isLoading || dataLoadFailed) return;
            
            isLoading = true;
            
            // 筛选思考内容
            const filteredThoughts = filterThoughts(currentCategory, currentSearchTerm);
            
            // 按日期降序排序（最新的在前）
            const sortedThoughts = [...filteredThoughts].sort((a, b) => {
                return new Date(b.date) - new Date(a.date); // 降序排列，最新的在前
            });
            
            const totalCount = sortedThoughts.length;
            
            // 移除骨架屏
            const skeletonCards = document.querySelectorAll('.skeleton-card');
            skeletonCards.forEach(card => {
                card.remove();
            });
            
            // 计算本次加载的数量
            const remainingCount = totalCount - currentCount;
            const countToLoad = Math.min(loadCount, remainingCount);
            
            // 模拟加载延迟
            setTimeout(() => {
                // 添加新的思考卡片
                for (let i = 0; i < countToLoad; i++) {
                    const thought = sortedThoughts[currentCount + i];
                    const card = createThoughtCard(thought);
                    thoughtsContainer.appendChild(card);
                }
                
                // 更新当前显示的数量
                currentCount += countToLoad;
                
                // 检查是否还有更多内容
                if (currentCount >= totalCount) {
                    noMoreContentIndicator.classList.remove('hidden');
                }
                
                isLoading = false;
            }, 1);
        }    

        // 重置并重新加载思考内容
        function resetAndLoadThoughts() {
            // 如果数据加载失败，不执行后续操作
            if (dataLoadFailed) return;
            
            // 清空容器
            thoughtsContainer.innerHTML = '';
            
            // 如果搜索词不为空，且没有结果，显示提示
            const filteredThoughts = filterThoughts(currentCategory, currentSearchTerm);
            if (currentSearchTerm && filteredThoughts.length === 0) {
                thoughtsContainer.innerHTML = `
                    <div class="col-span-full text-center py-12">
                        <i class="fa fa-search text-4xl text-gray-300 mb-4"></i>
                        <p class="text-gray-500">没有找到与"${currentSearchTerm}"相关的内容</p>
                    </div>
                `;
                noMoreContentIndicator.classList.add('hidden');
                
                // 更新类别计数（考虑搜索后的结果）
                updateCategoryCountsAfterSearch();
                return;
            }
            
            // 重置计数
            currentCount = 0;
            
            // 添加骨架屏
            for (let i = 0; i < 3; i++) {
                const skeletonCard = document.createElement('div');
                skeletonCard.className = 'skeleton-card col-span-full md:col-span-1 lg:col-span-1 bg-white rounded-lg overflow-hidden shadow-md animate-pulse';
                skeletonCard.innerHTML = `
                    <div class="p-6">
                        <div class="flex items-center mb-3">
                            <div class="skeleton w-20 h-5 rounded-full"></div>
                            <div class="skeleton ml-2 w-24 h-4 rounded"></div>
                        </div>
                        <div class="skeleton h-8 w-${Math.floor(Math.random() * 20 + 60)}% rounded mb-4"></div>
                        <div class="skeleton h-4 w-full rounded mb-2"></div>
                        <div class="skeleton h-4 w-${Math.floor(Math.random() * 20 + 60)}% rounded mb-2"></div>
                        <div class="skeleton h-4 w-${Math.floor(Math.random() * 20 + 40)}% rounded mb-6"></div>
                        <div class="skeleton h-5 w-24 rounded"></div>
                    </div>
                `;
                thoughtsContainer.appendChild(skeletonCard);
            }
            
            // 延迟加载内容，给骨架屏显示时间
            setTimeout(() => {
                loadThoughts();
                // 更新类别计数（考虑筛选后的结果）
                updateCategoryCountsAfterSearch();
            }, 500);
        }

        // 处理滚动加载
        function handleScroll() {
            const { scrollTop, scrollHeight, clientHeight } = document.documentElement;
            
            // 当滚动到页面底部附近时加载更多内容
            if (scrollTop + clientHeight >= scrollHeight - 300 && !isLoading && currentCount < thoughts.length && !dataLoadFailed) {
                loadThoughts();
            }
            
            // 控制返回顶部按钮的显示/隐藏
            if (scrollTop > 300) {
                backToTopButton.classList.remove('opacity-0', 'invisible');
                backToTopButton.classList.add('opacity-100', 'visible');
                navbar.classList.add('py-2');
                navbar.classList.remove('py-3');
            } else {
                backToTopButton.classList.add('opacity-0', 'invisible');
                backToTopButton.classList.remove('opacity-100', 'visible');
                navbar.classList.remove('py-2');
                navbar.classList.add('py-3');
            }
        }

        // 返回顶部
        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        // 统一处理分类筛选
        function handleCategoryFilter() {
            // 获取所有分类按钮和链接
            const categoryElements = document.querySelectorAll('[data-category]');
            
            categoryElements.forEach(element => {
                element.addEventListener('click', (e) => {
                    e.preventDefault();
                    
                    // 更新当前分类
                    currentCategory = element.getAttribute('data-category');
                    
                    // 更新所有分类按钮样式
                    categoryElements.forEach(btn => {
                        if (btn.getAttribute('data-category') === currentCategory) {
                            // 主分类标签按钮
                            if (btn.classList.contains('category-btn')) {
                                btn.classList.add('bg-primary', 'text-white');
                                btn.classList.remove('bg-white', 'text-dark');
                            }
                            
                            // 导航菜单中的分类链接
                            if (btn.tagName === 'A') {
                                btn.classList.add('text-primary', 'font-medium');
                                btn.classList.remove('text-dark');
                            }
                        } else {
                            // 主分类标签按钮
                            if (btn.classList.contains('category-btn')) {
                                btn.classList.remove('bg-primary', 'text-white');
                                btn.classList.add('bg-white', 'text-dark');
                            }
                            
                            // 导航菜单中的分类链接
                            if (btn.tagName === 'A') {
                                btn.classList.remove('text-primary', 'font-medium');
                                btn.classList.add('text-dark');
                            }
                        }
                    });
                    
                    // 移动端菜单处理
                    if (!mobileMenu.classList.contains('opacity-0')) {
                        toggleMobileMenu();
                    }
                    
                    if (!mobileCategoryMenu.classList.contains('hidden')) {
                        toggleMobileCategoryMenu();
                    }
                    
                    // 重置并加载思考内容
                    resetAndLoadThoughts();
                });
            });
        }    

        // 处理搜索
        function handleSearch() {
            function performSearch() {
                // 获取搜索关键词
                const searchTerm = searchInput.value.trim() || mobileSearchInput.value.trim();
                
                // 如果关键词变化了，才执行搜索
                if (searchTerm !== currentSearchTerm) {
                    currentSearchTerm = searchTerm;
                    resetAndLoadThoughts();
                }
            }
            
            // 搜索按钮事件
            searchButton.addEventListener('click', performSearch);
            mobileSearchButton.addEventListener('click', performSearch);
            
            // 搜索输入框回车事件
            searchInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    performSearch();
                }
            });
            
            mobileSearchInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    performSearch();
                }
            });
        }

        // 切换移动端菜单
        function toggleMobileMenu() {
            if (mobileMenu.classList.contains('opacity-0')) {
                mobileMenu.classList.remove('opacity-0', 'pointer-events-none', '-translate-y-4');
                mobileMenu.classList.add('opacity-100', 'pointer-events-auto', 'translate-y-0');
                mobileMenuButton.innerHTML = '<i class="fa fa-times text-xl"></i>';
            } else {
                mobileMenu.classList.add('opacity-0', 'pointer-events-none', '-translate-y-4');
                mobileMenu.classList.remove('opacity-100', 'pointer-events-auto', 'translate-y-0');
                mobileMenuButton.innerHTML = '<i class="fa fa-bars text-xl"></i>';
            }
        }

        // 切换移动端分类菜单
        function toggleMobileCategoryMenu() {
            if (mobileCategoryMenu.classList.contains('hidden')) {
                mobileCategoryMenu.classList.remove('hidden');
                mobileCategoryButton.innerHTML = '分类 <i class="fa fa-chevron-up text-xs"></i>';
            } else {
                mobileCategoryMenu.classList.add('hidden');
                mobileCategoryButton.innerHTML = '分类 <i class="fa fa-chevron-down text-xs"></i>';
            }
        }

        // 初始化
        async function init() {
            // 直接显示密码验证界面，不检查本地存储
            passwordModal.style.display = 'flex';
            
            // 从JSON加载数据
            await loadThoughtsFromJSON();
            
            if (!dataLoadFailed) {
                // 加载初始思考内容
                resetAndLoadThoughts();
                
                // 更新类别计数
                updateCategoryCounts();
            }
            
            // 注册滚动事件
            window.addEventListener('scroll', handleScroll);
            
            // 注册返回顶部按钮事件
            backToTopButton.addEventListener('click', scrollToTop);
            
            // 注册移动端菜单按钮事件
            mobileMenuButton.addEventListener('click', toggleMobileMenu);
            
            // 注册移动端分类菜单按钮事件
            mobileCategoryButton.addEventListener('click', toggleMobileCategoryMenu);
            
            // 注册分类筛选事件 - 使用统一的处理函数
            handleCategoryFilter();
            
            // 注册搜索事件
            handleSearch();
        }

        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
